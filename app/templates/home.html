{% extends 'layout.html' %}

{% block title %}
Home
{% endblock %}

{% block content %}
<main>
    <!-- Nav Bar-->
    {% include 'navBar.html' %}
    <style>
        /* Define a custom class for the search button */
        .search-button {
            background-color: white; /* Change to your desired color */
            color: black; /* Text color */
            border-color: gold; /* Border color (optional) */
        }
    
        /* Hover effect for the search button */
        .search-button:hover {
            background-color: gold; /* Change to your desired hover color */
            border-color: white; /* Border color on hover (optional) */
        }
        .custom-input {
            color: gold;
            background-color: black;
            border-color: gold;
        }
    </style>
    
    <section class="welcome-section">
        <div class="custom-div">
            <div class="row">
                <div class="col-md-8">
                    <h3>Welcome to Your Music Library</h3>
    <hr/>
                    <p>Explore a vast collection of music tracks from your favorite artists, albums, and genres.</p>
    <hr/>

        </div>
                <div class="col-md-4">
                    <form id="searchForm">
                        <div class="input-group">
                            <input type="text" class="form-control custom-input" id="searchInput" name="searchQuery" placeholder="Search...">
                            <div class="input-group-append">
                                <button class="btn btn-primary search-button" type="submit" ><b>Search</b></button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </section>

    <section class="search-results">
        <div class="container">
            <div class="row" id="trackResults">
                <!-- Track search results will appear here dynamically -->
            </div>
        </div>
    </section>
</main>

<script>
    document.getElementById('searchForm').addEventListener('submit', function(event) {
        event.preventDefault(); // Prevent form submission
        let searchQuery = document.getElementById('searchInput').value;
        fetch(`/search?query=${searchQuery}`)
            .then(response => response.json())
            .then(data => {
                let trackResults = document.getElementById('trackResults');
                trackResults.innerHTML = ''; // Clear previous results
                // Populate track search results
                data.forEach(track => {
                    let trackCard = `
                        <div class="col-md-4 mb-4">
                            <div class="card">
                                <div class="card-body">
                                    <h5 class="card-title">${track.title}</h5>
                                    <p class="card-text">Artist: ${track.artist}</p>
                                    <p class="card-text">Album: ${track.album}</p>
                                    <p class="card-text">Year: ${track.year_released}</p>
                                </div>
                            </div>
                        </div>
                    `;
                    trackResults.insertAdjacentHTML('beforeend', trackCard);
                });
            })
            .catch(error => console.error('Error:', error));
    });
</script>

{% endblock %}
